<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GMAT Focus Edition Exam for Sargam Aggarwal</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    .score-number {
      font-size: 2.5rem;
      font-weight: bold;
    }
    .question-container {
      min-height: 250px;
      margin-bottom: 20px;
    }
    .option-label {
      cursor: pointer;
    }
    .review-card {
      margin-bottom: 1rem;
    }
    .section-container {
      display: none;
    }
    .active-section {
      display: block;
    }
  </style>
</head>
<body class="d-flex flex-column min-vh-100">
  <!-- Navigation Bar -->
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="#">GMAT Focus Edition Exam for Sargam Aggarwal</a>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="container my-5">
    <!-- Overview Section -->
    <section id="overview" class="mb-5">
      <h1 class="mb-4">Exam Overview</h1>
      <p>
        This exam is structured for the GMAT Focus Edition and assesses your skills in Quantitative Reasoning, Verbal Reasoning, and Data Insights.
        Each section is allotted 45 minutes. There are no Sentence Correction or Geometry questions; expect Multi-Source Reasoning items in Data Insights.
      </p>
    </section>

    <!-- Start Exam Section -->
    <section id="startSection" class="mb-5">
      <h2 class="mb-4">Ready to Start Your Exam?</h2>
      <button id="startExamBtn" class="btn btn-success">Are you Ready? Start Exam</button>
    </section>

    <!-- Timer and End Session Section -->
    <div id="timerSection" class="d-flex justify-content-between align-items-center mb-3" style="display:none;">
      <div id="timerDisplay" class="fw-bold">Time Remaining: 45:00</div>
      <button id="endSessionBtn" class="btn btn-danger btn-sm">End Session Early</button>
    </div>

    <!-- SECTION: Quantitative Reasoning -->
    <section id="section-quant" class="section-container active-section">
      <h2 class="mb-3">Section: Quantitative Reasoning (21 Questions)</h2>
      <div id="progress-quant" class="text-end mb-2"></div>
      <div id="questionContainer-quant" class="question-container"></div>
      <div class="d-flex justify-content-between">
        <button id="prev-quant" class="btn btn-secondary" disabled>Previous</button>
        <button id="next-quant" class="btn btn-primary">Next</button>
      </div>
    </section>

    <!-- SECTION: Verbal Reasoning -->
    <section id="section-verbal" class="section-container">
      <h2 class="mb-3">Section: Verbal Reasoning (23 Questions)</h2>
      <div id="progress-verbal" class="text-end mb-2"></div>
      <div id="questionContainer-verbal" class="question-container"></div>
      <div class="d-flex justify-content-between">
        <button id="prev-verbal" class="btn btn-secondary" disabled>Previous</button>
        <button id="next-verbal" class="btn btn-primary">Next</button>
      </div>
    </section>

    <!-- SECTION: Data Insights -->
    <section id="section-data" class="section-container">
      <h2 class="mb-3">Section: Data Insights (20 Questions)</h2>
      <div id="progress-data" class="text-end mb-2"></div>
      <div id="questionContainer-data" class="question-container"></div>
      <div class="d-flex justify-content-between">
        <button id="prev-data" class="btn btn-secondary" disabled>Previous</button>
        <button id="next-data" class="btn btn-primary">Submit Exam</button>
      </div>
    </section>

    <!-- Results Section -->
    <section id="resultsSection" class="mb-5" style="display:none;">
      <h2 class="mb-4">Exam Results</h2>
      <div class="table-responsive">
        <table class="table table-bordered text-center">
          <thead class="table-light">
            <tr>
              <th>Total Correct Answers</th>
              <th>Total Wrong Answers</th>
              <th>Total Score</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td id="correctCount" class="score-number"></td>
              <td id="wrongCount" class="score-number"></td>
              <td id="totalScore" class="score-number"></td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Answer Review Section -->
    <section id="reviewSection" class="mb-5" style="display:none;">
      <h2 class="mb-4">Answer Review</h2>
      <div class="accordion" id="reviewAccordion">
        <!-- Quantitative Review -->
        <div class="accordion-item">
          <h2 class="accordion-header" id="reviewHeadingQuant">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#reviewCollapseQuant" aria-expanded="true" aria-controls="reviewCollapseQuant">
              Quantitative Review
            </button>
          </h2>
          <div id="reviewCollapseQuant" class="accordion-collapse collapse show" aria-labelledby="reviewHeadingQuant" data-bs-parent="#reviewAccordion">
            <div class="accordion-body" id="reviewQuant"></div>
          </div>
        </div>
        <!-- Verbal Review -->
        <div class="accordion-item">
          <h2 class="accordion-header" id="reviewHeadingVerbal">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#reviewCollapseVerbal" aria-expanded="false" aria-controls="reviewCollapseVerbal">
              Verbal Review
            </button>
          </h2>
          <div id="reviewCollapseVerbal" class="accordion-collapse collapse" aria-labelledby="reviewHeadingVerbal" data-bs-parent="#reviewAccordion">
            <div class="accordion-body" id="reviewVerbal"></div>
          </div>
        </div>
        <!-- Data Insights Review -->
        <div class="accordion-item">
          <h2 class="accordion-header" id="reviewHeadingData">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#reviewCollapseData" aria-expanded="false" aria-controls="reviewCollapseData">
              Data Insights Review
            </button>
          </h2>
          <div id="reviewCollapseData" class="accordion-collapse collapse" aria-labelledby="reviewHeadingData" data-bs-parent="#reviewAccordion">
            <div class="accordion-body" id="reviewData"></div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="bg-light py-4 mt-auto">
    <div class="container text-center">
      <span class="text-muted">&copy; 2025 GMAT Exam Simulator</span>
    </div>
  </footer>

  <!-- Bootstrap JS Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- JavaScript: Question Data, Navigation, Section Timers, and Review Generation -->
  <script>
    /**********************
     * QUESTION DATA ARRAYS
     **********************/

    // Quantitative Reasoning (21 Questions)
    const quantQuestions = [
      {
        question: "If a certain wheel turns at a constant rate of x revolutions per minute, how many revolutions will the wheel make in k seconds?",
        options: ["60kx", "kx", "x÷k", "x÷(60k)", "kx÷60"],
        correct: 4
      },
      {
        question: "If 5x - 7 = 3x + 9, what is the value of x?",
        options: ["6", "7", "8", "9", "10"],
        correct: 2
      },
      {
        question: "The sum of two numbers is 20 and their difference is 4. What is the product of the two numbers?",
        options: ["96", "104", "112", "120", "128"],
        correct: 0
      },
      {
        question: "If 4a = 2b and a + b = 18, what is the value of a?",
        options: ["4", "5", "6", "7", "8"],
        correct: 2
      },
      {
        question: "If 7y - 2 = 3y + 14, what is the value of y?",
        options: ["2", "3", "4", "5", "6"],
        correct: 2
      },
      {
        question: "If 2(x - 3) = 4x + 6, what is the value of x?",
        options: ["-6", "-5", "-4", "6", "7"],
        correct: 0
      },
      {
        question: "What is the value of (2x)² when x = 3?",
        options: ["18", "24", "30", "36", "42"],
        correct: 3
      },
      {
        question: "If 3(x+2) = 2(2x+1), what is x?",
        options: ["2", "3", "4", "5", "6"],
        correct: 2
      },
      {
        question: "Solve: 6/(x+1)=2. What is x?",
        options: ["1", "2", "3", "4", "0"],
        correct: 1
      },
      {
        question: "If 5x+3=2(2x+4)+x, what is x?",
        options: ["x=0", "x=1", "No solution", "Infinite solutions", "x=5"],
        correct: 2
      },
      {
        question: "If x/2 = 3/4, what is x?",
        options: ["1", "1.5", "2", "2.5", "3"],
        correct: 1
      },
      {
        question: "If (x+1)/(x-1)=2, what is x?",
        options: ["2", "3", "4", "5", "6"],
        correct: 1
      },
      {
        question: "Solve: x² - 5x + 6 = 0. What is the sum of the solutions?",
        options: ["3", "4", "5", "6", "7"],
        correct: 2
      },
      {
        question: "If 2^(x+1)=16, what is x?",
        options: ["2", "3", "4", "5", "6"],
        correct: 1
      },
      {
        question: "If log₂(x)=5, what is x?",
        options: ["16", "32", "64", "128", "256"],
        correct: 1
      },
      {
        question: "Solve: 3^(x)=81. What is x?",
        options: ["3", "4", "5", "6", "7"],
        correct: 1
      },
      {
        question: "If (x-2)(x+3)=0, what is the product of the solutions?",
        options: ["-6", "6", "0", "1", "-1"],
        correct: 0
      },
      {
        question: "Solve for x: 2x + 3 = 3x - 4.",
        options: ["6", "7", "8", "9", "10"],
        correct: 1
      },
      {
        question: "If 1/x = 2, what is x?",
        options: ["0.5", "1", "2", "3", "4"],
        correct: 0
      },
      {
        question: "Solve: 4(x - 1) = 2x + 6.",
        options: ["4", "5", "6", "7", "8"],
        correct: 1
      },
      {
        question: "If 3(x+2) = 2x + 9, what is x?",
        options: ["2", "3", "4", "5", "6"],
        correct: 1
      }
    ];

    // Verbal Reasoning (23 Questions)
    const verbalQuestions = [
      {
        question: "Reading Comprehension:\n\nDirections:\nThe questions in this group are based on the content of a passage. After reading the passage, choose the best answer to each question.\n\nPassage: \"Schools expect textbooks to be a valuable source of information for students. My research suggests, however, that textbooks that address the place of Native Americans within the history of the United States distort history to suit a particular cultural value system. In some textbooks, for example, settlers are pictured as more humane, complex, skillful, and wise than Native Americans. In essence, textbooks stereotype and depreciate the numerous Native American cultures while reinforcing the attitude that the European conquest of the New World denotes the superiority of European cultures. Although textbooks evaluate Native American architecture, political systems, and homemaking, I contend that they do it from an ethnocentric, European perspective without recognizing that other perspectives are possible. One argument against my contention asserts that, by nature, textbooks are culturally biased and that I am simply underestimating children's ability to see through these biases. Some researchers even claim that by the time students are in high school, they know they cannot take textbooks literally. Yet substantial evidence exists to the contrary. Two researchers, for example, have conducted studies that suggest that children's attitudes about particular cultures are strongly influenced by the textbooks used in schools. Given this, an ongoing, careful review of how school textbooks depict Native Americans is certainly warranted.\"\n\nQuestion:\nWhich of the following would most logically be the topic of the paragraph immediately following the passage?\n",
        options: [
          "Specific ways to evaluate the biases of United States history textbooks",
          "The centrality of the teacher's role in United States history courses",
          "Nontraditional methods of teaching United States history",
          "The contributions of European immigrants to the development of the United States",
          "Ways in which parents influence children's political attitudes"
        ],
        correct: 0
      },
      {
        question: "Critical Reasoning:\n\nDirections:\nFor this question, select the best of the answer choices given.\n\nQuestion:\nMall Owner: Our mall’s occupancy rate is so low that we are barely making a profit. We cannot raise rents because of an unacceptably high risk of losing established tenants. On the other hand, a mall that is fully occupied costs about as much to run as one in which a rental space here and a rental space there stands empty. Clearly, therefore, to increase profits we must sign up new tenants.\n\nWhich of the following, if true, most seriously weakens the argument?\n",
        options: [
          "The mall’s operating costs could be cut by consolidating currently rented spaces in such a way that an entire wing of the mall could be closed up.",
          "The mall is located in a geographic area in which costs incurred for air-conditioning in the hot summers exceed those incurred for heating in the mild winters by a wider margin.",
          "The mall’s occupancy rate, though relatively low, has been relatively stable for several years.",
          "The mall lost tenants as a result of each of the two major rent increases that have occurred there.",
          "None of the mall’s established tenants is likely to need additional floor space there in the foreseeable future."
        ],
        correct: 0
      }
    ];

    // Add 21 placeholder tough verbal questions (Questions 3–23)
    for (let i = 3; i <= 23; i++) {
      verbalQuestions.push({
        question: "Critical Reasoning: Placeholder tough verbal question " + i + ".",
        options: ["Option A", "Option B", "Option C", "Option D", "Option E"],
        correct: 0
      });
    }

    // Data Insights (20 Questions)
    const dataQuestions = [
      {
        question: "Data Sufficiency:\n\nDirections:\nThis problem consists of a question and two statements. Decide whether the statements are sufficient to answer the question.\n\nQuestion:\nWhat is the monthly rent for a certain apartment?\n\n(1) The monthly rent per person for 4 people to share the rent is $375.\n(2) The monthly rent per person for 4 people to share the rent is $125 less than the monthly rent per person for 3 people to share the rent.\n",
        options: [
          "Statement (1) ALONE is sufficient, but statement (2) alone is not sufficient.",
          "Statement (2) ALONE is sufficient, but statement (1) alone is not sufficient.",
          "Both statements together are sufficient, but neither alone is sufficient.",
          "Each statement alone is sufficient.",
          "Statements together are not sufficient."
        ],
        correct: 0
      },
      {
        question: "Multi-Source Reasoning:\n\nDirections:\nUsing the information from the following sources, answer the question.\n\nSource A: A company's sales increased by 15% last quarter.\nSource B: The company's profit margin decreased by 5% last quarter.\n\nQuestion:\nWhat can be inferred about the company's performance?\n",
        options: [
          "Sales increased, but efficiency decreased.",
          "Sales increased significantly, leading to higher profits.",
          "The company's performance improved overall.",
          "The company is in a loss-making situation.",
          "The provided data is insufficient to infer performance."
        ],
        correct: 0
      },
      {
        question: "Table Analysis:\n\nDirections:\nA table shows the monthly production output (in units) for three factories:\nFactory A: 100, 120, 140\nFactory B: 90, 110, 130\nFactory C: 80, 105, 125\n\nQuestion:\nWhat is the average production of Factory B over the three months?",
        options: ["110", "115", "120", "125", "130"],
        correct: 0
      },
      {
        question: "Graphics Interpretation:\n\nDirections:\nA bar chart shows quarterly revenue for a company as follows: Q1: $200K, Q2: $250K, Q3: $300K, Q4: $350K.\n\nQuestion:\nWhich quarter shows the highest percentage increase in revenue compared to the previous quarter?",
        options: ["Q1", "Q2", "Q3", "Q4", "All quarters increased equally"],
        correct: 1
      },
      {
        question: "Two-Part Analysis:\n\nDirections:\nA survey shows that 60% of respondents prefer Product X over Product Y. If 40% of those who prefer Product Y switch to Product X after a price reduction, what is the new percentage of respondents who prefer Product X?",
        options: ["60%", "64%", "68%", "72%", "76%"],
        correct: 4
      }
    ];

    // Add 15 placeholder tough data insights questions (Questions 6–20)
    for (let i = 6; i <= 20; i++) {
      dataQuestions.push({
        question: "Placeholder Data Insights tough question " + i + ".",
        options: ["Option A", "Option B", "Option C", "Option D", "Option E"],
        correct: 0
      });
    }

    /********************************
     * STATE VARIABLES & TIMER SETUP
     ********************************/
    const totalQuant = quantQuestions.length;   // 21
    const totalVerbal = verbalQuestions.length;   // 23
    const totalData = dataQuestions.length;       // 20
    let currentQuant = 0, currentVerbal = 0, currentData = 0;
    const quantAnswers = Array(totalQuant).fill(null);
    const verbalAnswers = Array(totalVerbal).fill(null);
    const dataAnswers = Array(totalData).fill(null);

    // Timer variables for each section (45 minutes = 2700 seconds)
    let sectionTimeRemaining = 2700;
    let sectionTimerInterval = null;

    // Helper: Format seconds as MM:SS
    function formatTime(seconds) {
      const m = Math.floor(seconds / 60);
      const s = seconds % 60;
      return `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
    }

    // Start timer for the current section
    function startSectionTimer() {
      sectionTimeRemaining = 2700; // Reset to 45 minutes
      document.getElementById("timerDisplay").textContent = "Time Remaining: " + formatTime(sectionTimeRemaining);
      sectionTimerInterval = setInterval(() => {
        sectionTimeRemaining--;
        document.getElementById("timerDisplay").textContent = "Time Remaining: " + formatTime(sectionTimeRemaining);
        if (sectionTimeRemaining <= 0) {
          clearInterval(sectionTimerInterval);
          alert("Time is up for this section. Moving to the next section.");
          moveToNextSection();
        }
      }, 1000);
    }

    // Update progress: Count unanswered questions in the given section
    function updateProgress(section) {
      let unanswered = 0, total = 0;
      if (section === 'quant') {
        total = totalQuant;
        quantAnswers.forEach(ans => { if (ans === null) unanswered++; });
        document.getElementById("progress-quant").textContent = `Unanswered: ${unanswered} out of ${total}`;
      } else if (section === 'verbal') {
        total = totalVerbal;
        verbalAnswers.forEach(ans => { if (ans === null) unanswered++; });
        document.getElementById("progress-verbal").textContent = `Unanswered: ${unanswered} out of ${total}`;
      } else if (section === 'data') {
        total = totalData;
        dataAnswers.forEach(ans => { if (ans === null) unanswered++; });
        document.getElementById("progress-data").textContent = `Unanswered: ${unanswered} out of ${total}`;
      }
    }

    // Render a question for a given section and index
    function renderQuestion(section, index) {
      let qData, container;
      if(section === 'quant') { 
        qData = quantQuestions[index]; 
        container = document.getElementById("questionContainer-quant"); 
      }
      else if(section === 'verbal') { 
        qData = verbalQuestions[index]; 
        container = document.getElementById("questionContainer-verbal"); 
      }
      else if(section === 'data') { 
        qData = dataQuestions[index]; 
        container = document.getElementById("questionContainer-data"); 
      }
      
      let html = `<h5>Question ${index + 1}: ${qData.question}</h5><form id="${section}-form">`;
      qData.options.forEach((opt, i) => {
        const checked = ((section === 'quant' && quantAnswers[index] === i) ||
                         (section === 'verbal' && verbalAnswers[index] === i) ||
                         (section === 'data' && dataAnswers[index] === i)) ? "checked" : "";
        html += `
          <div class="form-check my-2">
            <input class="form-check-input" type="radio" name="${section}-question" id="${section}-q${index}-opt${i}" value="${i}" ${checked}>
            <label class="form-check-label option-label" for="${section}-q${index}-opt${i}">${opt}</label>
          </div>
        `;
      });
      html += `</form>`;
      container.innerHTML = html;

      // Update navigation button text based on position in section
      document.getElementById("prev-" + section).disabled = (index === 0);
      let nextBtn = document.getElementById("next-" + section);
      if(section === 'quant' && index === totalQuant - 1) {
        nextBtn.textContent = "Done Section";
      } else if(section === 'verbal' && index === totalVerbal - 1) {
        nextBtn.textContent = "Done Section";
      } else if(section === 'data' && index === totalData - 1) {
        nextBtn.textContent = "Submit Exam";
      } else {
        nextBtn.textContent = "Next";
      }
      updateProgress(section);
    }

    // Save the selected answer for the current question
    function saveAnswer(section, index) {
      const form = document.querySelector(`#${section}-form`);
      if(form) {
        const selected = form.elements[`${section}-question`].value;
        if(selected === "" || selected === undefined) return false;
        if(section === 'quant') quantAnswers[index] = parseInt(selected);
        else if(section === 'verbal') verbalAnswers[index] = parseInt(selected);
        else if(section === 'data') dataAnswers[index] = parseInt(selected);
        updateProgress(section);
        return true;
      }
      return false;
    }

    // Navigation: Next question (enforces answer selection)
    function nextQuestion(section) {
      let current, total;
      if(section === 'quant') { current = currentQuant; total = totalQuant; }
      else if(section === 'verbal') { current = currentVerbal; total = totalVerbal; }
      else if(section === 'data') { current = currentData; total = totalData; }

      // Do not allow skipping if no answer is selected
      if (!saveAnswer(section, current)) {
        alert("Please select an answer before proceeding.");
        return;
      }

      if (current < total - 1) {
        if(section === 'quant') { currentQuant++; renderQuestion('quant', currentQuant); }
        else if(section === 'verbal') { currentVerbal++; renderQuestion('verbal', currentVerbal); }
        else if(section === 'data') { currentData++; renderQuestion('data', currentData); }
      } else {
        // End of section – move to next section
        moveToNextSection();
      }
    }

    // Navigation: Previous question within the current section
    function prevQuestion(section) {
      let current;
      if(section === 'quant') { current = currentQuant; }
      else if(section === 'verbal') { current = currentVerbal; }
      else if(section === 'data') { current = currentData; }
      if (current > 0) {
        saveAnswer(section, current);
        if(section === 'quant') { currentQuant--; renderQuestion('quant', currentQuant); }
        else if(section === 'verbal') { currentVerbal--; renderQuestion('verbal', currentVerbal); }
        else if(section === 'data') { currentData--; renderQuestion('data', currentData); }
      }
    }

    // Show a specific section (Quant, then Verbal, then Data)
    function showSection(sectionId) {
      const sections = ["section-quant", "section-verbal", "section-data"];
      sections.forEach(id => {
        document.getElementById(id).classList.remove("active-section");
      });
      document.getElementById(sectionId).classList.add("active-section");
      clearInterval(sectionTimerInterval);
      startSectionTimer();
    }

    // Move sequentially to the next section
    function moveToNextSection() {
      if(document.getElementById("section-quant").classList.contains("active-section")) {
        // Finished Quantitative: move to Verbal
        showSection("section-verbal");
      } else if(document.getElementById("section-verbal").classList.contains("active-section")) {
        // Finished Verbal: move to Data Insights
        showSection("section-data");
      } else if(document.getElementById("section-data").classList.contains("active-section")) {
        // Finished Data Insights: submit exam
        submitExam();
      }
    }

    // Generate the detailed Answer Review section
    function generateReview() {
      function createReviewCard(qText, yourAnswer, correctAnswer, options) {
        const isCorrect = yourAnswer === correctAnswer;
        const yourAnsText = (yourAnswer === null) ? "No answer selected" : options[yourAnswer];
        const correctAnsText = options[correctAnswer];
        return `
          <div class="card review-card">
            <div class="card-body">
              <h6>${qText}</h6>
              <p>Your answer: 
                <span class="badge ${isCorrect ? 'bg-success' : 'bg-danger'}">${yourAnsText}</span>
                ${!isCorrect ? '<small class="ms-2 text-muted">Review this concept.</small>' : ''}
              </p>
              ${!isCorrect ? `<p>Correct answer: <span class="badge bg-info text-dark">${correctAnsText}</span></p>` : ''}
            </div>
          </div>
        `;
      }
      // Quantitative Review
      const reviewQuantContainer = document.getElementById("reviewQuant");
      reviewQuantContainer.innerHTML = "";
      quantQuestions.forEach((q, i) => {
        reviewQuantContainer.innerHTML += createReviewCard(
          `Q${i+1}: ${q.question}`,
          quantAnswers[i],
          q.correct,
          q.options
        );
      });
      // Verbal Review
      const reviewVerbalContainer = document.getElementById("reviewVerbal");
      reviewVerbalContainer.innerHTML = "";
      verbalQuestions.forEach((q, i) => {
        reviewVerbalContainer.innerHTML += createReviewCard(
          `Q${i+1}: ${q.question}`,
          verbalAnswers[i],
          q.correct,
          q.options
        );
      });
      // Data Insights Review
      const reviewDataContainer = document.getElementById("reviewData");
      reviewDataContainer.innerHTML = "";
      dataQuestions.forEach((q, i) => {
        reviewDataContainer.innerHTML += createReviewCard(
          `Q${i+1}: ${q.question}`,
          dataAnswers[i],
          q.correct,
          q.options
        );
      });
    }

    // Submit the exam: compute results and generate the review
    function submitExam() {
      // Ensure the last answer is saved if in Data section
      if(document.getElementById("section-data").classList.contains("active-section")) {
        saveAnswer('data', currentData);
      }
      clearInterval(sectionTimerInterval);
      let correctCount = 0;
      quantQuestions.forEach((q, i) => { if(quantAnswers[i] == q.correct) correctCount++; });
      verbalQuestions.forEach((q, i) => { if(verbalAnswers[i] == q.correct) correctCount++; });
      dataQuestions.forEach((q, i) => { if(dataAnswers[i] == q.correct) correctCount++; });
      let wrongCount = 64 - correctCount;
      
      // Calculate section scores and map average to GMAT total score (205–805)
      const quantScore = 60 + 30 * (quantAnswers.filter((a, i) => a === quantQuestions[i].correct).length / totalQuant);
      const verbalScore = 60 + 30 * (verbalAnswers.filter((a, i) => a === verbalQuestions[i].correct).length / totalVerbal);
      const dataScore = 60 + 30 * (dataAnswers.filter((a, i) => a === dataQuestions[i].correct).length / totalData);
      const avgSectionScore = (quantScore + verbalScore + dataScore) / 3;
      let totalScore = 205 + ((avgSectionScore - 60) / 30) * 600;
      totalScore = Math.round(totalScore / 5) * 5;
      
      document.getElementById("correctCount").textContent = correctCount;
      document.getElementById("wrongCount").textContent = wrongCount;
      document.getElementById("totalScore").textContent = totalScore;
      
      // Hide sections and timer; show results and review
      document.getElementById("section-data").style.display = "none";
      document.getElementById("timerSection").style.display = "none";
      document.getElementById("resultsSection").style.display = "block";
      document.getElementById("reviewSection").style.display = "block";
      
      generateReview();
    }

    /**********************
     * EVENT LISTENERS
     **********************/
    document.getElementById("next-quant").addEventListener("click", function() { nextQuestion('quant'); });
    document.getElementById("prev-quant").addEventListener("click", function() { prevQuestion('quant'); });
    document.getElementById("next-verbal").addEventListener("click", function() { nextQuestion('verbal'); });
    document.getElementById("prev-verbal").addEventListener("click", function() { prevQuestion('verbal'); });
    document.getElementById("next-data").addEventListener("click", function() { nextQuestion('data'); });
    document.getElementById("prev-data").addEventListener("click", function() { prevQuestion('data'); });

    document.getElementById("endSessionBtn").addEventListener("click", function() {
      if(confirm("Are you sure you want to end the session early? Your exam will be submitted.")) {
        submitExam();
      }
    });

    document.getElementById("startExamBtn").addEventListener("click", function() {
      // Hide start section, show Quantitative section and timer
      document.getElementById("startSection").style.display = "none";
      document.getElementById("timerSection").style.display = "flex";
      document.getElementById("section-quant").style.display = "block";
      startSectionTimer();
      renderQuestion('quant', currentQuant);
    });
  </script>
</body>
</html>
